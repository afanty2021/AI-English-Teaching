#### é”™é¢˜è¯¦æƒ…

**ã€é¢˜ç›®å†…å®¹ã€‘**

> {{ mistake.question }}

**ã€ç­”é¢˜æƒ…å†µã€‘**

| é¡¹ç›® | å†…å®¹ |
|------|------|
| âŒ ä½ çš„ç­”æ¡ˆ | {{ mistake.wrong_answer }} |
| âœ… æ­£ç¡®ç­”æ¡ˆ | {{ mistake.correct_answer }} |
| ğŸ“š é¢˜ç›®ç±»å‹ | {{ mistake.mistake_type | get_type_name }} |
| ğŸ·ï¸ çŠ¶æ€ | {{ mistake.status | get_status_name }} |
| ğŸ“Š é”™è¯¯æ¬¡æ•° | {{ mistake.mistake_count }} æ¬¡ |
| ğŸ”„ å¤ä¹ æ¬¡æ•° | {{ mistake.review_count }} æ¬¡ |
{% if mistake.topic %}
| ğŸ“– ä¸»é¢˜ | {{ mistake.topic }} |
{% endif %}
{% if mistake.difficulty_level %}
| ğŸ“ˆ éš¾åº¦ | {{ mistake.difficulty_level }} |
{% endif %}
{% if mistake.knowledge_points %}
| ğŸ¯ çŸ¥è¯†ç‚¹ | {{ mistake.knowledge_points | join('ã€') }} |
{% endif %}
{% if mistake.first_mistaken_at %}
| ğŸ“… é¦–æ¬¡é”™è¯¯ | {{ mistake.first_mistaken_at.strftime('%Y-%m-%d') }} |
{% endif %}
{% if mistake.last_mistaken_at %}
| ğŸ“… æœ€è¿‘é”™è¯¯ | {{ mistake.last_mistaken_at.strftime('%Y-%m-%d') }} |
{% endif %}
{% if mistake.mastery_level is not none %}
| ğŸ’ æŒæ¡ç¨‹åº¦ | {{ (mistake.mastery_level * 100) | int }}% |
{% endif %}

{% if mistake.ai_analysis %}

**ã€AIåˆ†æã€‘**

##### é”™è¯¯åˆ†ç±»

> **{{ mistake.ai_analysis.mistake_category }}** Â· ä¸¥é‡ç¨‹åº¦: {{ mistake.ai_analysis.severity }}

##### è¯¦ç»†è§£é‡Š

{{ mistake.ai_analysis.explanation }}

##### æ­£ç¡®æ–¹æ³•

{{ mistake.ai_analysis.correct_approach }}

{% if mistake.ai_analysis.root_cause %}

##### æ ¹æœ¬åŸå› åˆ†æ

- **ä¸»è¦åŸå› **: {{ mistake.ai_analysis.root_cause.primary_cause }}
{% if mistake.ai_analysis.root_cause.secondary_causes %}
- **æ¬¡è¦åŸå› **:
{% for cause in mistake.ai_analysis.root_cause.secondary_causes %}
  - {{ cause }}
{% endfor %}
{% endif %}
{% if mistake.ai_analysis.root_cause.knowledge_gaps %}
- **çŸ¥è¯†ç›²ç‚¹**:
{% for gap in mistake.ai_analysis.root_cause.knowledge_gaps %}
  - {{ gap }}
{% endfor %}
{% endif %}
{% endif %}

{% if mistake.ai_analysis.grammar_errors %}

##### è¯­æ³•é”™è¯¯è¯¦æƒ…

{% for error in mistake.ai_analysis.grammar_errors %}
**{{ loop.index }}. {{ error.error_type }}**

- ä½ç½®: {{ error.location }}
- æ­£ç¡®å½¢å¼: {{ error.correction }}
- è§£é‡Š: {{ error.explanation }}

{% endfor %}
{% endif %}

{% if mistake.ai_analysis.vocabulary_errors %}

##### è¯æ±‡é”™è¯¯è¯¦æƒ…

{% for error in mistake.ai_analysis.vocabulary_errors %}
**{{ loop.index }}. {{ error.word }}**

- æ­£ç¡®å½¢å¼: {{ error.correct_form }}
- å«ä¹‰: {{ error.meaning }}
- ç”¨æ³•ç¤ºä¾‹: {{ error.usage_example }}
{% if error.common_mistake %}
- âš ï¸ å¸¸è§é”™è¯¯
{% endif %}

{% endfor %}
{% endif %}

{% if mistake.ai_analysis.comprehension_issues %}

##### ç†è§£é—®é¢˜è¯¦æƒ…

{% for issue in mistake.ai_analysis.comprehension_issues %}
**{{ loop.index }}. {{ issue.issue_type }}**

- è¯¯è§£å†…å®¹: {{ issue.misunderstanding }}
- æ­£ç¡®ç†è§£: {{ issue.clarification }}
- ç†è§£æŠ€å·§: {{ issue.tips }}

{% endfor %}
{% endif %}

{% if mistake.ai_analysis.recommendations %}

##### å­¦ä¹ å»ºè®®

{% for rec in mistake.ai_analysis.recommendations %}
**{{ loop.index }}. {{ rec.title }}** (ä¼˜å…ˆçº§: P{{ rec.priority }})

> {{ rec.description }}

{% if rec.resources %}
ğŸ“š æ¨èèµ„æº:
{% for resource in rec.resources %}
- {{ resource }}
{% endfor %}
{% endif %}

{% if rec.practice_exercises %}
âœï¸ ç»ƒä¹ å»ºè®®:
{% for exercise in rec.practice_exercises %}
- {{ exercise }}
{% endfor %}
{% endif %}

{% if rec.estimated_time %}
â±ï¸ é¢„è®¡æ—¶é—´: {{ rec.estimated_time }}
{% endif %}

{% endfor %}
{% endif %}

{% if mistake.ai_analysis.review_plan %}

##### å¤ä¹ è®¡åˆ’

- ğŸ“… **å¤ä¹ é¢‘ç‡**: {{ mistake.ai_analysis.review_plan.review_frequency }}
- ğŸ”„ **å¤ä¹ é—´éš”**: {{ mistake.ai_analysis.review_plan.next_review_days | join('å¤©ã€') }}å¤©
- ğŸ¯ **æŒæ¡æ ‡å‡†**: {{ mistake.ai_analysis.review_plan.mastery_criteria }}
- ğŸ“ **å¤ä¹ æ–¹æ³•**: {{ mistake.ai_analysis.review_plan.review_method }}

{% endif %}

{% if mistake.ai_analysis.encouragement %}

---

> ğŸ’ª {{ mistake.ai_analysis.encouragement }}

{% endif %}

{% elif mistake.explanation %}

**ã€æ•™å¸ˆè§£æã€‘**

{{ mistake.explanation }}

{% endif %}

---

