<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Feb 8, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #1767 | 12:03 AM | ğŸŸ£ | Lesson Export System Reaches Full Feature Completion | ~418 |
</claude-mem-context>

# E2E æµ‹è¯•æ¨¡å—æ–‡æ¡£

> AI è‹±è¯­æ•™å­¦ç³»ç»Ÿ - å‰ç«¯ç«¯åˆ°ç«¯æµ‹è¯•

## æ¦‚è¿°

æœ¬æ¨¡å—åŒ…å«å‰ç«¯ç«¯åˆ°ç«¯(E2E)æµ‹è¯•ï¼Œä½¿ç”¨ Playwright æ¡†æ¶éªŒè¯ç”¨æˆ·äº¤äº’æµç¨‹å’Œç³»ç»Ÿé›†æˆã€‚

## æµ‹è¯•ç»“æ„

```
e2e/
â”œâ”€â”€ *.spec.ts              # æµ‹è¯•è§„æ ¼æ–‡ä»¶
â”œâ”€â”€ *.fixture.ts           # æµ‹è¯• fixtures
â”œâ”€â”€ global-setup.ts        # å…¨å±€è®¾ç½®
â”œâ”€â”€ auth/                  # è®¤è¯ç›¸å…³
â”‚   â””â”€â”€ storage-state.json # é¢„ä¿å­˜çš„è®¤è¯çŠ¶æ€
â””â”€â”€ .auth/                 # è®¤è¯çŠ¶æ€æ–‡ä»¶ç›®å½•
    â”œâ”€â”€ teacher-storage-state.json
    â””â”€â”€ student-storage-state.json
```

## æµ‹è¯•æ–‡ä»¶

| æ–‡ä»¶ | æè¿° | çŠ¶æ€ |
|------|------|------|
| `recommendation-loop.spec.ts` | æ¨èç³»ç»Ÿé—­ç¯æµ‹è¯• | âœ¨ æ–°å¢ |
| `performance.spec.ts` | æ€§èƒ½æµ‹è¯• | âœ¨ æ–°å¢ |
| `student-auth.fixture.ts` | å­¦ç”Ÿè®¤è¯ fixture | âœ¨ æ–°å¢ |
| `question-editor.spec.ts` | é¢˜ç›®ç¼–è¾‘å™¨æµ‹è¯• | å·²å­˜åœ¨ |
| `auth-test.spec.ts` | è®¤è¯æµ‹è¯• | å·²å­˜åœ¨ |

## è¿è¡Œæµ‹è¯•

### æ‰€æœ‰ E2E æµ‹è¯•

```bash
cd frontend
npx playwright test
```

### æ¨èç³»ç»Ÿé—­ç¯æµ‹è¯•

```bash
# ä½¿ç”¨å­¦ç”Ÿè®¤è¯
npx playwright test recommendation-loop.spec.ts --project=chromium-student

# ä½¿ç”¨æ•™å¸ˆè®¤è¯
npx playwright test recommendation-loop.spec.ts --project=chromium
```

### æ€§èƒ½æµ‹è¯•

```bash
npx playwright test performance.spec.ts
```

### ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š

```bash
# HTML æŠ¥å‘Š
npx playwright test --reporter=html
open playwright-report/index.html
```

## æµ‹è¯•é…ç½®

### Playwright é…ç½® (`playwright.config.ts`)

```typescript
export default defineConfig({
  testDir: './e2e',
  globalSetup: './e2e/global-setup.ts',
  use: {
    baseURL: 'http://localhost:5174',
    trace: 'on-first-retry',
  },
  projects: [
    { name: 'chromium', use: { storageState: 'e2e/.auth/teacher-storage-state.json' } },
    { name: 'chromium-student', use: { storageState: 'e2e/.auth/student-storage-state.json' } },
  ],
})
```

### è®¤è¯çŠ¶æ€

- **æ•™å¸ˆ**: `e2e/.auth/teacher-storage-state.json`
- **å­¦ç”Ÿ**: `e2e/.auth/student-storage-state.json`

## æ¨èç³»ç»Ÿæµ‹è¯•

### æµ‹è¯•åœºæ™¯

1. **å®Œæ•´é—­ç¯æµ‹è¯•** (`recommendation-loop.spec.ts`)
   - ä»æ¨èè¿›å…¥ç»ƒä¹ 
   - å®Œæˆç»ƒä¹ åéªŒè¯å›¾è°±æ›´æ–°
   - è–„å¼±ç‚¹é’ˆå¯¹æ€§ç»ƒä¹ 
   - äºŒæ¬¡æ¨èéªŒè¯å›¾è°±å˜åŒ–

2. **æ€§èƒ½æµ‹è¯•** (`performance.spec.ts`)
   - é¡µé¢åŠ è½½æ€§èƒ½
   - APIå“åº”æ—¶é—´
   - å†…å­˜ä½¿ç”¨ç›‘æ§
   - å¹¶å‘è¯·æ±‚æµ‹è¯•

3. **é”™è¯¯å¤„ç†æµ‹è¯•**
   - ç½‘ç»œé”™è¯¯å¤„ç†
   - APIé”™è¯¯é™çº§

### æ€§èƒ½é˜ˆå€¼

| æŒ‡æ ‡ | é˜ˆå€¼ | è¯´æ˜ |
|------|------|------|
| é¡µé¢åŠ è½½æ—¶é—´ | < 5ç§’ | é¦–å±æ¸²æŸ“å®Œæˆ |
| APIå“åº”æ—¶é—´ | < 2ç§’ | å•ä¸ªAPIè¯·æ±‚ |
| æŒ‰é’®äº¤äº’å“åº” | < 2ç§’ | ç”¨æˆ·äº¤äº’å“åº” |
| P95å“åº”æ—¶é—´ | < 5ç§’ | 95%è¯·æ±‚å®Œæˆ |

## Fixtures

### å­¦ç”Ÿè®¤è¯ Fixture

```typescript
import { test } from './student-auth.fixture'

test('studentPage', async ({ studentPage }) => {
  const { page, studentData } = studentPage
  // ä½¿ç”¨å­¦ç”Ÿè®¤è¯é¡µé¢è¿›è¡Œæµ‹è¯•
})
```

### æ•™å¸ˆè®¤è¯ Fixture

```typescript
import { test } from './fixtures'

test('authenticatedPage', async ({ authenticatedPage }) => {
  // ä½¿ç”¨æ•™å¸ˆè®¤è¯é¡µé¢è¿›è¡Œæµ‹è¯•
})
```

## å¸¸è§é—®é¢˜

### æµ‹è¯•å¤±è´¥

1. **æ£€æŸ¥å¼€å‘æœåŠ¡å™¨**: ç¡®ä¿ `npm run dev` åœ¨è¿è¡Œ
2. **æ£€æŸ¥è®¤è¯çŠ¶æ€**: è¿è¡Œ `npx playwright install --with-deps`
3. **æ¸…é™¤ç¼“å­˜**: åˆ é™¤ `node_modules/.playwright` åé‡æ–°å®‰è£…

### è®¤è¯é—®é¢˜

```bash
# é‡æ–°ç”Ÿæˆè®¤è¯çŠ¶æ€
npx playwright install
node e2e/global-setup.ts
```

## ç›¸å…³èµ„æº

- [Playwright æ–‡æ¡£](https://playwright.dev/docs)
- [Vue Test Utils](https://test-utils.vuejs.org/)
- [Vitest](https://vitest.dev/)
