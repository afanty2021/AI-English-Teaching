# AI èµ‹èƒ½è‹±è¯­æ•™å­¦ç³»ç»Ÿ

> **æœ€åæ›´æ–°**: 2026-02-03 18:30:00
> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **é¡¹ç›®çŠ¶æ€**: å¼€å‘ä¸­ (MVPé˜¶æ®µ)

---

## å˜æ›´è®°å½•

### 2026-02-03 19:00:00
- ğŸ¨ **å‰ç«¯**: é”™é¢˜æœ¬ PDF å¯¼å‡ºåŠŸèƒ½å®Œå–„
  - ä¿®å¤ MistakeBookView.vue å¯¼å…¥é—®é¢˜ï¼ˆElLoadingã€é‡å¤å›¾æ ‡ï¼‰
  - å‰ç«¯ API å®Œæ•´æ”¯æŒ PDF/Markdown/Word å¯¼å‡º
  - å®ç°æ‰¹é‡å¯¼å‡ºå’Œå•ä¸ªé”™é¢˜å¯¼å‡º UI

### 2026-02-03 18:30:00
- âœ¨ **æ–°å¢**: PDF æ¸²æŸ“æœåŠ¡ (`pdf_renderer_service.py`)
  - é›†æˆ markdown2 + weasyprint å®ç° Markdown åˆ° PDF è½¬æ¢
  - æ”¯æŒä¸­æ–‡å†…å®¹çš„è·¨å¹³å°å­—ä½“æ£€æµ‹
  - å®Œæ•´çš„ CSS Paged Media æ ·å¼æ”¯æŒï¼ˆåˆ†é¡µã€é¡µçœ‰é¡µè„šã€è¡¨æ ¼ï¼‰
- âœ¨ **æ–°å¢**: é”™é¢˜æœ¬ PDF å¯¼å‡ºåŠŸèƒ½
  - æ”¯æŒå•ä¸ªé”™é¢˜å’Œæ‰¹é‡é”™é¢˜å¯¼å‡º
  - ä» Jinja2 æ¨¡æ¿ç”Ÿæˆç»“æ„åŒ–é”™é¢˜æŠ¥å‘Š
- âœ… **æ–°å¢**: PDF è¾…åŠ©å·¥å…· (`pdf_helpers.py`)
  - è·¨å¹³å°å­—ä½“æ£€æµ‹ï¼ˆmacOS/Windows/Linuxï¼‰
  - CSS å­—ä½“æ—ç”Ÿæˆ
- ğŸ“Š **æµ‹è¯•**: PDF æ¸²æŸ“æœåŠ¡æµ‹è¯•è¦†ç›–ç‡ 88%
- ğŸ”§ **ä¾èµ–**: æ·»åŠ  markdown2ã€weasyprint 61.2ã€pydyf 0.8.0

### 2026-02-03 09:49:22
- åˆå§‹åŒ– AI ä¸Šä¸‹æ–‡æ–‡æ¡£ä½“ç³»
- å®Œæˆé¡¹ç›®æ¶æ„æ‰«æä¸æ¨¡å—è¯†åˆ«
- ç”Ÿæˆæ ¹çº§æ–‡æ¡£ä¸æ¨¡å—çº§æ–‡æ¡£ç»“æ„

---

## é¡¹ç›®æ„¿æ™¯

AI èµ‹èƒ½è‹±è¯­æ•™å­¦ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäº"ç´ å…»æ‰“åº•ï¼Œè€ƒç‚¹èå…¥"ç†å¿µçš„ä¸ªæ€§åŒ–è‹±è¯­å­¦ä¹ å¹³å°ï¼Œé€šè¿‡ AI æŠ€æœ¯å®ç°ï¼š

- **æ™ºèƒ½åˆ†çº§æ¨é€**: åŸºäºi+1ç†è®ºï¼ŒåŠ¨æ€æ¨é€éš¾åº¦é€‚é…çš„å­¦ä¹ å†…å®¹
- **çŸ¥è¯†å›¾è°±è¯Šæ–­**: æ„å»ºå­¦ç”Ÿä¸ªæ€§åŒ–çŸ¥è¯†ç”»åƒï¼Œç²¾å‡†å®šä½è–„å¼±ç¯èŠ‚
- **AIå£è¯­é™ªç»ƒ**: é›¶å‹åŠ›çš„AIå¯¹è¯ç¯å¢ƒï¼Œæå‡å£è¯­è¡¨è¾¾èƒ½åŠ›
- **AIè¾…åŠ©å¤‡è¯¾**: è‡ªåŠ¨ç”Ÿæˆæ•™æ¡ˆã€è¯¾ä»¶ã€ç»ƒä¹ ï¼Œæé«˜æ•™å¸ˆå¤‡è¯¾æ•ˆç‡

### æ ¸å¿ƒä»·å€¼

- **æˆæœ¬ä¼˜åŒ–**: æ··åˆæ¶æ„ï¼ˆæœ¬åœ°å‘é‡æœç´¢+äº‘ç«¯AIï¼‰ï¼Œé™ä½95%çš„AIè°ƒç”¨æˆæœ¬
- **ä¸ªæ€§åŒ–å­¦ä¹ **: æ¯ä¸ªå­¦ç”Ÿéƒ½æœ‰ç‹¬ç‰¹çš„çŸ¥è¯†å›¾è°±å’Œå­¦ä¹ è·¯å¾„
- **æ•™å¸ˆææ•ˆ**: AIåŠ©æ•™ä»é‡å¤æ€§åŠ³åŠ¨ä¸­è§£æ”¾æ•™å¸ˆ
- **æ•°æ®é©±åŠ¨**: ç”¨æ•°æ®è¯´è¯ï¼ŒåŒ–è§£å®¶é•¿ç„¦è™‘

---

## æ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯å±‚ (Vue3)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•™å¸ˆç«¯ (ç™»å½•/ç­çº§ç®¡ç†/å¤‡è¯¾åŠ©æ‰‹)    å­¦ç”Ÿç«¯ (è¯¾ç¨‹/ç»ƒä¹ /å¯¹è¯)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ REST API
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     åº”ç”¨å±‚ (FastAPI)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”¨æˆ·æœåŠ¡  â”‚  å†…å®¹æœåŠ¡  â”‚  å­¦ä¹ æœåŠ¡  â”‚  AIæœåŠ¡  â”‚  è®¤è¯æœåŠ¡  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ•°æ®å±‚                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PostgreSQL  â”‚  Redis  â”‚  Qdrantå‘é‡åº“  â”‚  S3/OSSå­˜å‚¨          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AIæœåŠ¡å±‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  OpenAI GPT-4  â”‚  Anthropic Claude  â”‚  è¯­éŸ³æœåŠ¡(TTS/STT)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|----------|------|
| å‰ç«¯ | Vue3 + Vite + Pinia + Element Plus | ç»„åˆå¼APIï¼ŒçŠ¶æ€ç®¡ç† |
| åç«¯ | FastAPI + SQLAlchemy + Alembic | å¼‚æ­¥æ”¯æŒï¼ŒORMç®¡ç† |
| æ•°æ®åº“ | PostgreSQL 15 + Redis 7 | ä¸»æ•°æ®åº“+ç¼“å­˜ |
| å‘é‡åº“ | Qdrant | å‘é‡ç›¸ä¼¼åº¦æœç´¢ |
| PDFå¯¼å‡º | markdown2 + weasyprint | Markdownè½¬PDFæ¸²æŸ“ |
| AIæœåŠ¡ | OpenAI GPT-4 / Anthropic Claude | å¤§è¯­è¨€æ¨¡å‹ |
| éƒ¨ç½² | Docker + Docker Compose | å®¹å™¨åŒ–éƒ¨ç½² |

---

## æ¨¡å—ç»“æ„å›¾

```mermaid
graph TD
    A["(æ ¹) AI-English-Teaching-System"] --> B["backend"];
    A --> C["frontend"];
    A --> D["docs"];

    B --> B1["app/api"];
    B --> B2["app/core"];
    B --> B3["app/models"];
    B --> B4["app/services"];
    B --> B5["app/db"];
    B --> B6["tests"];

    C --> C1["src/views"];
    C --> C2["src/stores"];
    C --> C3["src/api"];
    C --> C4["src/router"];

    D --> D1["design"];
    D --> D2["plans"];

    click B "./backend/CLAUDE.md" "æŸ¥çœ‹åç«¯æ¨¡å—æ–‡æ¡£"
    click C "./frontend/CLAUDE.md" "æŸ¥çœ‹å‰ç«¯æ¨¡å—æ–‡æ¡£"
    click D "./docs/CLAUDE.md" "æŸ¥çœ‹æ–‡æ¡£æ¨¡å—"
```

---

## æ¨¡å—ç´¢å¼•

| æ¨¡å— | è·¯å¾„ | èŒè´£ | ä¸»è¦è¯­è¨€ | æ–‡æ¡£çŠ¶æ€ |
|------|------|------|----------|----------|
| **åç«¯** | `backend/` | FastAPIåç«¯æœåŠ¡ï¼Œæä¾›APIã€ä¸šåŠ¡é€»è¾‘ã€æ•°æ®æŒä¹…åŒ– | Python | å·²å®Œæˆ |
| **å‰ç«¯** | `frontend/` | Vue3å‰ç«¯åº”ç”¨ï¼Œæ•™å¸ˆç«¯ä¸å­¦ç”Ÿç«¯ | TypeScript/Vue | å·²å®Œæˆ |
| **æ–‡æ¡£** | `docs/` | è®¾è®¡æ–‡æ¡£ä¸å®æ–½è®¡åˆ’ | Markdown | å·²å®Œæˆ |

---

## è¿è¡Œä¸å¼€å‘

### å‰ç½®è¦æ±‚

- Python 3.11+
- Node.js 18+
- Docker & Docker Compose
- Git

### å¿«é€Ÿå¯åŠ¨

#### 1. å¯åŠ¨åŸºç¡€è®¾æ–½

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
cd backend
docker-compose up -d
```

è¿™å°†å¯åŠ¨ PostgreSQLã€Redis å’Œ Qdrant å‘é‡æ•°æ®åº“ã€‚

#### 2. åç«¯è®¾ç½®

```bash
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -e ".[dev]"

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®å¿…è¦å‚æ•°

# è¿è¡Œæ•°æ®åº“è¿ç§»
alembic upgrade head

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

API æ–‡æ¡£: http://localhost:8000/docs

#### 3. å‰ç«¯è®¾ç½®

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯åœ°å€: http://localhost:5173

---

## æµ‹è¯•ç­–ç•¥

### åç«¯æµ‹è¯•

```bash
cd backend

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=app --cov-report=html

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest tests/services/test_knowledge_graph_service.py
```

### å‰ç«¯æµ‹è¯•

å‰ç«¯æµ‹è¯•æ¡†æ¶å¾…é…ç½®ï¼ˆè®¡åˆ’ä½¿ç”¨ Vitest + Vue Test Utilsï¼‰ã€‚

---

## ç¼–ç è§„èŒƒ

### Python (åç«¯)

- éµå¾ª PEP 8 è§„èŒƒ
- ä½¿ç”¨ Black æ ¼å¼åŒ–ä»£ç  (è¡Œé•¿åº¦ 100)
- ä½¿ç”¨ Ruff è¿›è¡Œä»£ç æ£€æŸ¥
- ç±»å‹æ£€æŸ¥ä½¿ç”¨ MyPy
- æ–‡æ¡£å­—ç¬¦ä¸²ä½¿ç”¨ Google é£æ ¼

```bash
# æ ¼å¼åŒ–ä»£ç 
black app tests

# ä»£ç æ£€æŸ¥
ruff check app tests

# ç±»å‹æ£€æŸ¥
mypy app
```

### TypeScript (å‰ç«¯)

- ä½¿ç”¨ ESLint + Prettier
- éµå¾ª Vue 3 ç»„åˆå¼APIæœ€ä½³å®è·µ
- ä½¿ç”¨ Pinia è¿›è¡ŒçŠ¶æ€ç®¡ç†

---

## AI ä½¿ç”¨æŒ‡å—

### é¡¹ç›®æ¶æ„ç†è§£

æœ¬é¡¹ç›®é‡‡ç”¨æ··åˆAIæ¶æ„ï¼Œå…³é”®ä¼˜åŒ–ç‚¹ï¼š

1. **å‘é‡æœç´¢ä¼˜å…ˆ**: 90%çš„å†…å®¹åŒ¹é…ä½¿ç”¨æœ¬åœ°Qdrantå‘é‡æœç´¢
2. **è§„åˆ™å¼•æ“**: çŸ¥è¯†å›¾è°±æ—¥å¸¸æ›´æ–°ä½¿ç”¨è§„åˆ™å¼•æ“ï¼ˆé›¶æˆæœ¬ï¼‰
3. **AIç²¾æ’**: ä»…å¯¹Top 10ç»“æœä½¿ç”¨AIè¿›è¡Œç²¾æ’å’Œç†ç”±ç”Ÿæˆ

### å…³é”®æœåŠ¡æ–‡ä»¶

- `app/services/knowledge_graph_service.py`: çŸ¥è¯†å›¾è°±è¯Šæ–­ä¸æ›´æ–°
- `app/services/vector_service.py`: å‘é‡æœç´¢æœåŠ¡
- `app/services/graph_rules.py`: è§„åˆ™å¼•æ“ï¼ˆé›¶æˆæœ¬æ›´æ–°ï¼‰
- `app/services/pdf_renderer_service.py`: PDF æ¸²æŸ“æœåŠ¡ï¼ˆmarkdown2 + weasyprintï¼‰
- `app/services/mistake_export_service.py`: é”™é¢˜æœ¬å¯¼å‡ºï¼ˆMarkdown/PDF/Wordï¼‰
- `app/core/security.py`: è®¤è¯ä¸å®‰å…¨

### æˆæœ¬ä¼˜åŒ–æç¤º

å½“ä¿®æ”¹AIç›¸å…³ä»£ç æ—¶ï¼Œè¯·æ³¨æ„ï¼š
- åˆå§‹è¯Šæ–­å’Œå®šæœŸå¤ç›˜ä½¿ç”¨AIï¼ˆçº¦å 5%ï¼‰
- æ—¥å¸¸æ›´æ–°ä½¿ç”¨è§„åˆ™å¼•æ“ï¼ˆçº¦å 95%ï¼‰
- å‘é‡æœç´¢åœ¨æœ¬åœ°å®Œæˆï¼Œæ— APIè°ƒç”¨æˆæœ¬

---

## å¼€å‘è·¯çº¿å›¾

### MVPé˜¶æ®µ (3ä¸ªæœˆ)

| é˜¶æ®µ | å†…å®¹ | çŠ¶æ€ |
|------|------|------|
| ç¬¬1æœˆ | åŸºç¡€æ¶æ„ + ç”¨æˆ·ç³»ç»Ÿ | è¿›è¡Œä¸­ |
| ç¬¬2æœˆ | çŸ¥è¯†å›¾è°± + å†…å®¹æ¨è | å¾…å¼€å§‹ |
| ç¬¬3æœˆ | å£è¯­é™ªç»ƒ + AIå¤‡è¯¾ | å¾…å¼€å§‹ |

è¯¦è§: [MVPå®æ–½è®¡åˆ’](docs/plans/2026-02-01-mvp-implementation-plan.md)

---

## å¸¸è§é—®é¢˜

### DockeræœåŠ¡å¯åŠ¨å¤±è´¥

æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š
```bash
lsof -i :5432  # PostgreSQL
lsof -i :6379  # Redis
lsof -i :6333  # Qdrant
```

### æ•°æ®åº“è¿æ¥å¤±è´¥

ç¡®è®¤ Docker æœåŠ¡æ­£åœ¨è¿è¡Œï¼š
```bash
cd backend
docker-compose ps
```

### AI API è°ƒç”¨å¤±è´¥

ç¡®è®¤ API å¯†é’¥å·²æ­£ç¡®é…ç½®ï¼š
```bash
echo $OPENAI_API_KEY
```

### PDF å¯¼å‡ºåŠŸèƒ½é—®é¢˜

ç¡®è®¤ PDF ä¾èµ–å·²å®‰è£…ï¼š
```bash
cd backend
pip list | grep -E "markdown2|weasyprint|pydyf"
```

ç‰ˆæœ¬è¦æ±‚ï¼š
- weasyprint: 61.2ï¼ˆå¿…é¡»ç²¾ç¡®ç‰ˆæœ¬ï¼‰
- pydyf: 0.8.0ï¼ˆå¿…é¡»ç²¾ç¡®ç‰ˆæœ¬ï¼‰

æ£€æŸ¥ä¸­æ–‡å­—ä½“ï¼š
```bash
python -c "from app.utils.pdf_helpers import check_font_availability; print(check_font_availability())"
```

---

## ç›¸å…³èµ„æº

- [ç³»ç»Ÿè®¾è®¡æ–‡æ¡£](docs/design/system-design.md)
- [æ ¸å¿ƒæ¨¡å—è®¾è®¡](docs/design/core-modules-design.md)
- [MVPå®æ–½è®¡åˆ’](docs/plans/2026-02-01-mvp-implementation-plan.md)
- [åç«¯README](backend/README.md)
